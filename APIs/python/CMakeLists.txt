
SET(CMAKE_BUILD_TYPE Release)

FIND_PACKAGE(PythonLibs)
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_DIRS})

INCLUDE_DIRECTORIES(${FREELING_PREFIX}/include)

set (CMAKE_CXX_STANDARD 11)
add_definitions( -DBOOST_ALL_NO_LIB  -DBOOST_ALL_DYN_LINK )
if (WIN32)
  # compiler defintions for windows
  add_definitions(-D_CRT_SECURE_NO_WARNINGS=1 -D_CRT_NONSTDC_NO_DEPRECATE=1 -DNOMINMAX -DNDEBUG=1 -DWIN32=1 -D_CONSOLE=1)
endif()

SET_PROPERTY(SOURCE freeling_pythonAPI.i PROPERTY CPLUSPLUS ON)
SWIG_ADD_LIBRARY(freeling TYPE SHARED LANGUAGE python SOURCES freeling_pythonAPI.i)
if(WIN32)
  file(TO_CMAKE_PATH ${FREELING_PREFIX} FREELING_PREFIX)
  SWIG_LINK_LIBRARIES(freeling ${PYTHON_LIBRARIES} ${FREELING_PREFIX}/lib/static/freeling.lib )
  #SWIG_LINK_LIBRARIES(freeling ${PYTHON_LIBRARIES} ${FREELING_PREFIX}/bin/freeling.dll )
else()
  SWIG_LINK_LIBRARIES(freeling ${FREELING_PREFIX}/lib/libfreeling.so)
endif()


install(FILES ${CMAKE_CURRENT_BINARY_DIR}/_freeling.so ${CMAKE_CURRENT_BINARY_DIR}/freeling.py
        DESTINATION APIs/python)
